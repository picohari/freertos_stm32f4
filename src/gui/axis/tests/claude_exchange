/* ============================================================================
 * File: fast_text.h
 * Description: Ultra-fast streaming text renderer for real-time display
 *              8x16 monospace font with full ASCII support (32-127)
 * ============================================================================ */

 #ifndef FAST_TEXT_H
 #define FAST_TEXT_H
 
 #include "gfx.h"
 
 /**
  * @brief Draw text string at position (left-aligned)
  * @param x X position (left edge)
  * @param y Y position (top edge)
  * @param text String to display
  * @param text_color Color for text
  * @param bg_color Background color
  */
 void FastText_DrawString(coord_t x, coord_t y, const char *text,
                         color_t text_color, color_t bg_color);
 
 /**
  * @brief Draw text string right-aligned
  * @param x X position (right edge)
  * @param y Y position
  * @param text String to display
  * @param text_color Text color
  * @param bg_color Background color
  */
 void FastText_DrawStringRight(coord_t x, coord_t y, const char *text,
                              color_t text_color, color_t bg_color);
 
 /**
  * @brief Draw float value right-aligned
  * @param x X position (right edge)
  * @param y Y position
  * @param value Float value
  * @param decimals Decimal places (0-3)
  * @param field_width Total character width
  * @param text_color Text color
  * @param bg_color Background color
  */
 void FastText_DrawFloat(coord_t x, coord_t y, float value, uint8_t decimals,
                        uint8_t field_width, color_t text_color, color_t bg_color);
 
 /**
  * @brief Draw integer right-aligned
  * @param x X position (right edge)
  * @param y Y position  
  * @param value Integer value
  * @param field_width Character width
  * @param text_color Text color
  * @param bg_color Background color
  */
 void FastText_DrawInt(coord_t x, coord_t y, int32_t value, uint8_t field_width,
                      color_t text_color, color_t bg_color);
 
 /**
  * @brief Get character dimensions
  * @param width Pointer to store width
  * @param height Pointer to store height
  */
 void FastText_GetCharSize(coord_t *width, coord_t *height);
 
 /**
  * @brief Set font scale (1x, 2x, 3x)
  * @param scale Scale factor (1=8x16, 2=16x32, 3=24x48)
  */
 void FastText_SetScale(uint8_t scale);
 
 #endif /* FAST_TEXT_H */
 
 /* ============================================================================
  * File: fast_text.c  
  * Description: 8x16 monospace font with full ASCII (32-127)
  * ============================================================================ */
 
 #include "fast_text.h"
 #include <stdio.h>
 
 /* 8x16 monospace font - printable ASCII characters (32-127) */
 /* Each character is 16 bytes, each byte represents 8 horizontal pixels */
 static const uint8_t font_8x16[96][16] = {
     {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, // 32 ' '
     {0x00,0x00,0x18,0x3C,0x3C,0x3C,0x18,0x18,0x18,0x00,0x18,0x18,0x00,0x00,0x00,0x00}, // 33 '!'
     {0x00,0x66,0x66,0x66,0x24,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, // 34 '"'
     {0x00,0x00,0x00,0x6C,0x6C,0xFE,0x6C,0x6C,0x6C,0xFE,0x6C,0x6C,0x00,0x00,0x00,0x00}, // 35 '#'
     {0x18,0x18,0x7C,0xC6,0xC2,0xC0,0x7C,0x06,0x06,0x86,0xC6,0x7C,0x18,0x18,0x00,0x00}, // 36 '$'
     {0x00,0x00,0x00,0x00,0xC2,0xC6,0x0C,0x18,0x30,0x60,0xC6,0x86,0x00,0x00,0x00,0x00}, // 37 '%'
     {0x00,0x00,0x38,0x6C,0x6C,0x38,0x76,0xDC,0xCC,0xCC,0xCC,0x76,0x00,0x00,0x00,0x00}, // 38 '&'
     {0x00,0x30,0x30,0x30,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, // 39 '''
     {0x00,0x00,0x0C,0x18,0x30,0x30,0x30,0x30,0x30,0x30,0x18,0x0C,0x00,0x00,0x00,0x00}, // 40 '('
     {0x00,0x00,0x30,0x18,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x18,0x30,0x00,0x00,0x00,0x00}, // 41 ')'
     {0x00,0x00,0x00,0x00,0x00,0x66,0x3C,0xFF,0x3C,0x66,0x00,0x00,0x00,0x00,0x00,0x00}, // 42 '*'
     {0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x7E,0x18,0x18,0x00,0x00,0x00,0x00,0x00,0x00}, // 43 '+'
     {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x18,0x30,0x00,0x00,0x00}, // 44 ','
     {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, // 45 '-'
     {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x00}, // 46 '.'
     {0x00,0x00,0x00,0x00,0x02,0x06,0x0C,0x18,0x30,0x60,0xC0,0x80,0x00,0x00,0x00,0x00}, // 47 '/'
     {0x00,0x00,0x38,0x6C,0xC6,0xC6,0xD6,0xD6,0xC6,0xC6,0x6C,0x38,0x00,0x00,0x00,0x00}, // 48 '0'
     {0x00,0x00,0x18,0x38,0x78,0x18,0x18,0x18,0x18,0x18,0x18,0x7E,0x00,0x00,0x00,0x00}, // 49 '1'
     {0x00,0x00,0x7C,0xC6,0x06,0x0C,0x18,0x30,0x60,0xC0,0xC6,0xFE,0x00,0x00,0x00,0x00}, // 50 '2'
     {0x00,0x00,0x7C,0xC6,0x06,0x06,0x3C,0x06,0x06,0x06,0xC6,0x7C,0x00,0x00,0x00,0x00}, // 51 '3'
     {0x00,0x00,0x0C,0x1C,0x3C,0x6C,0xCC,0xFE,0x0C,0x0C,0x0C,0x1E,0x00,0x00,0x00,0x00}, // 52 '4'
     {0x00,0x00,0xFE,0xC0,0xC0,0xC0,0xFC,0x06,0x06,0x06,0xC6,0x7C,0x00,0x00,0x00,0x00}, // 53 '5'
     {0x00,0x00,0x38,0x60,0xC0,0xC0,0xFC,0xC6,0xC6,0xC6,0xC6,0x7C,0x00,0x00,0x00,0x00}, // 54 '6'
     {0x00,0x00,0xFE,0xC6,0x06,0x06,0x0C,0x18,0x30,0x30,0x30,0x30,0x00,0x00,0x00,0x00}, // 55 '7'
     {0x00,0x00,0x7C,0xC6,0xC6,0xC6,0x7C,0xC6,0xC6,0xC6,0xC6,0x7C,0x00,0x00,0x00,0x00}, // 56 '8'
     {0x00,0x00,0x7C,0xC6,0xC6,0xC6,0x7E,0x06,0x06,0x06,0x0C,0x78,0x00,0x00,0x00,0x00}, // 57 '9'
     {0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x00,0x00}, // 58 ':'
     {0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x18,0x18,0x30,0x00,0x00,0x00,0x00}, // 59 ';'
     {0x00,0x00,0x00,0x06,0x0C,0x18,0x30,0x60,0x30,0x18,0x0C,0x06,0x00,0x00,0x00,0x00}, // 60 '<'
     {0x00,0x00,0x00,0x00,0x00,0x7E,0x00,0x00,0x7E,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, // 61 '='
     {0x00,0x00,0x00,0x60,0x30,0x18,0x0C,0x06,0x0C,0x18,0x30,0x60,0x00,0x00,0x00,0x00}, // 62 '>'
     {0x00,0x00,0x7C,0xC6,0xC6,0x0C,0x18,0x18,0x18,0x00,0x18,0x18,0x00,0x00,0x00,0x00}, // 63 '?'
     {0x00,0x00,0x7C,0xC6,0xC6,0xDE,0xDE,0xDE,0xDC,0xC0,0xC0,0x7C,0x00,0x00,0x00,0x00}, // 64 '@'
     {0x00,0x00,0x10,0x38,0x6C,0xC6,0xC6,0xFE,0xC6,0xC6,0xC6,0xC6,0x00,0x00,0x00,0x00}, // 65 'A'
     {0x00,0x00,0xFC,0x66,0x66,0x66,0x7C,0x66,0x66,0x66,0x66,0xFC,0x00,0x00,0x00,0x00}, // 66 'B'
     {0x00,0x00,0x3C,0x66,0xC2,0xC0,0xC0,0xC0,0xC0,0xC2,0x66,0x3C,0x00,0x00,0x00,0x00}, // 67 'C'
     {0x00,0x00,0xF8,0x6C,0x66,0x66,0x66,0x66,0x66,0x66,0x6C,0xF8,0x00,0x00,0x00,0x00}, // 68 'D'
     {0x00,0x00,0xFE,0x66,0x62,0x68,0x78,0x68,0x60,0x62,0x66,0xFE,0x00,0x00,0x00,0x00}, // 69 'E'
     {0x00,0x00,0xFE,0x66,0x62,0x68,0x78,0x68,0x60,0x60,0x60,0xF0,0x00,0x00,0x00,0x00}, // 70 'F'
     {0x00,0x00,0x3C,0x66,0xC2,0xC0,0xC0,0xDE,0xC6,0xC6,0x66,0x3A,0x00,0x00,0x00,0x00}, // 71 'G'
     {0x00,0x00,0xC6,0xC6,0xC6,0xC6,0xFE,0xC6,0xC6,0xC6,0xC6,0xC6,0x00,0x00,0x00,0x00}, // 72 'H'
     {0x00,0x00,0x3C,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x3C,0x00,0x00,0x00,0x00}, // 73 'I'
     {0x00,0x00,0x1E,0x0C,0x0C,0x0C,0x0C,0x0C,0xCC,0xCC,0xCC,0x78,0x00,0x00,0x00,0x00}, // 74 'J'
     {0x00,0x00,0xE6,0x66,0x66,0x6C,0x78,0x78,0x6C,0x66,0x66,0xE6,0x00,0x00,0x00,0x00}, // 75 'K'
     {0x00,0x00,0xF0,0x60,0x60,0x60,0x60,0x60,0x60,0x62,0x66,0xFE,0x00,0x00,0x00,0x00}, // 76 'L'
     {0x00,0x00,0xC6,0xEE,0xFE,0xFE,0xD6,0xC6,0xC6,0xC6,0xC6,0xC6,0x00,0x00,0x00,0x00}, // 77 'M'
     {0x00,0x00,0xC6,0xE6,0xF6,0xFE,0xDE,0xCE,0xC6,0xC6,0xC6,0xC6,0x00,0x00,0x00,0x00}, // 78 'N'
     {0x00,0x00,0x7C,0xC6,0xC6,0xC6,0xC6,0xC6,0xC6,0xC6,0xC6,0x7C,0x00,0x00,0x00,0x00}, // 79 'O'
     {0x00,0x00,0xFC,0x66,0x66,0x66,0x7C,0x60,0x60,0x60,0x60,0xF0,0x00,0x00,0x00,0x00}, // 80 'P'
     {0x00,0x00,0x7C,0xC6,0xC6,0xC6,0xC6,0xC6,0xC6,0xD6,0xDE,0x7C,0x0C,0x0E,0x00,0x00}, // 81 'Q'
     {0x00,0x00,0xFC,0x66,0x66,0x66,0x7C,0x6C,0x66,0x66,0x66,0xE6,0x00,0x00,0x00,0x00}, // 82 'R'
     {0x00,0x00,0x7C,0xC6,0xC6,0x60,0x38,0x0C,0x06,0xC6,0xC6,0x7C,0x00,0x00,0x00,0x00}, // 83 'S'
     {0x00,0x00,0x7E,0x7E,0x5A,0x18,0x18,0x18,0x18,0x18,0x18,0x3C,0x00,0x00,0x00,0x00}, // 84 'T'
     {0x00,0x00,0xC6,0xC6,0xC6,0xC6,0xC6,0xC6,0xC6,0xC6,0xC6,0x7C,0x00,0x00,0x00,0x00}, // 85 'U'
     {0x00,0x00,0xC6,0xC6,0xC6,0xC6,0xC6,0xC6,0xC6,0x6C,0x38,0x10,0x00,0x00,0x00,0x00}, // 86 'V'
     {0x00,0x00,0xC6,0xC6,0xC6,0xC6,0xD6,0xD6,0xD6,0xFE,0xEE,0x6C,0x00,0x00,0x00,0x00}, // 87 'W'
     {0x00,0x00,0xC6,0xC6,0x6C,0x7C,0x38,0x38,0x7C,0x6C,0xC6,0xC6,0x00,0x00,0x00,0x00}, // 88 'X'
     {0x00,0x00,0x66,0x66,0x66,0x66,0x3C,0x18,0x18,0x18,0x18,0x3C,0x00,0x00,0x00,0x00}, // 89 'Y'
     {0x00,0x00,0xFE,0xC6,0x86,0x0C,0x18,0x30,0x60,0xC2,0xC6,0xFE,0x00,0x00,0x00,0x00}, // 90 'Z'
     {0x00,0x00,0x3C,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x3C,0x00,0x00,0x00,0x00}, // 91 '['
     {0x00,0x00,0x00,0x80,0xC0,0xE0,0x70,0x38,0x1C,0x0E,0x06,0x02,0x00,0x00,0x00,0x00}, // 92 '\'
     {0x00,0x00,0x3C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x0C,0x3C,0x00,0x00,0x00,0x00}, // 93 ']'
     {0x10,0x38,0x6C,0xC6,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, // 94 '^'
     {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00}, // 95 '_'
     {0x30,0x30,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, // 96 '`'
     {0x00,0x00,0x00,0x00,0x00,0x78,0x0C,0x7C,0xCC,0xCC,0xCC,0x76,0x00,0x00,0x00,0x00}, // 97 'a'
     {0x00,0x00,0xE0,0x60,0x60,0x78,0x6C,0x66,0x66,0x66,0x66,0x7C,0x00,0x00,0x00,0x00}, // 98 'b'
     {0x00,0x00,0x00,0x00,0x00,0x7C,0xC6,0xC0,0xC0,0xC0,0xC6,0x7C,0x00,0x00,0x00,0x00}, // 99 'c'
     {0x00,0x00,0x1C,0x0C,0x0C,0x3C,0x6C,0xCC,0xCC,0xCC,0xCC,0x76,0x00,0x00,0x00,0x00}, // 100 'd'
     {0x00,0x00,0x00,0x00,0x00,0x7C,0xC6,0xFE,0xC0,0xC0,0xC6,0x7C,0x00,0x00,0x00,0x00}, // 101 'e'
     {0x00,0x00,0x38,0x6C,0x64,0x60,0xF0,0x60,0x60,0x60,0x60,0xF0,0x00,0x00,0x00,0x00}, // 102 'f'
     {0x00,0x00,0x00,0x00,0x00,0x76,0xCC,0xCC,0xCC,0xCC,0xCC,0x7C,0x0C,0xCC,0x78,0x00}, // 103 'g'
     {0x00,0x00,0xE0,0x60,0x60,0x6C,0x76,0x66,0x66,0x66,0x66,0xE6,0x00,0x00,0x00,0x00}, // 104 'h'
     {0x00,0x00,0x18,0x18,0x00,0x38,0x18,0x18,0x18,0x18,0x18,0x3C,0x00,0x00,0x00,0x00}, // 105 'i'
     {0x00,0x00,0x06,0x06,0x00,0x0E,0x06,0x06,0x06,0x06,0x06,0x06,0x66,0x66,0x3C,0x00}, // 106 'j'
     {0x00,0x00,0xE0,0x60,0x60,0x66,0x6C,0x78,0x78,0x6C,0x66,0xE6,0x00,0x00,0x00,0x00}, // 107 'k'
     {0x00,0x00,0x38,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x3C,0x00,0x00,0x00,0x00}, // 108 'l'
     {0x00,0x00,0x00,0x00,0x00,0xEC,0xFE,0xD6,0xD6,0xD6,0xD6,0xC6,0x00,0x00,0x00,0x00}, // 109 'm'
     {0x00,0x00,0x00,0x00,0x00,0xDC,0x66,0x66,0x66,0x66,0x66,0x66,0x00,0x00,0x00,0x00}, // 110 'n'
     {0x00,0x00,0x00,0x00,0x00,0x7C,0xC6,0xC6,0xC6,0xC6,0xC6,0x7C,0x00,0x00,0x00,0x00}, // 111 'o'
     {0x00,0x00,0x00,0x00,0x00,0xDC,0x66,0x66,0x66,0x66,0x66,0x7C,0x60,0x60,0xF0,0x00}, // 112 'p'
     {0x00,0x00,0x00,0x00,0x00,0x76,0xCC,0xCC,0xCC,0xCC,0xCC,0x7C,0x0C,0x0C,0x1E,0x00}, // 113 'q'
     {0x00,0x00,0x00,0x00,0x00,0xDC,0x76,0x66,0x60,0x60,0x60,0xF0,0x00,0x00,0x00,0x00}, // 114 'r'
     {0x00,0x00,0x00,0x00,0x00,0x7C,0xC6,0x60,0x38,0x0C,0xC6,0x7C,0x00,0x00,0x00,0x00}, // 115 's'
     {0x00,0x00,0x10,0x30,0x30,0xFC,0x30,0x30,0x30,0x30,0x36,0x1C,0x00,0x00,0x00,0x00}, // 116 't'
     {0x00,0x00,0x00,0x00,0x00,0xCC,0xCC,0xCC,0xCC,0xCC,0xCC,0x76,0x00,0x00,0x00,0x00}, // 117 'u'
     {0x00,0x00,0x00,0x00,0x00,0xC6,0xC6,0xC6,0xC6,0xC6,0x6C,0x38,0x00,0x00,0x00,0x00}, // 118 'v'
     {0x00,0x00,0x00,0x00,0x00,0xC6,0xC6,0xD6,0xD6,0xD6,0xFE,0x6C,0x00,0x00,0x00,0x00}, // 119 'w'
     {0x00,0x00,0x00,0x00,0x00,0xC6,0x6C,0x38,0x38,0x38,0x6C,0xC6,0x00,0x00,0x00,0x00}, // 120 'x'
     {0x00,0x00,0x00,0x00,0x00,0xC6,0xC6,0xC6,0xC6,0xC6,0xC6,0x7E,0x06,0x0C,0xF8,0x00}, // 121 'y'
     {0x00,0x00,0x00,0x00,0x00,0xFE,0xCC,0x18,0x30,0x60,0xC6,0xFE,0x00,0x00,0x00,0x00}, // 122 'z'
     {0x00,0x00,0x0E,0x18,0x18,0x18,0x70,0x18,0x18,0x18,0x18,0x0E,0x00,0x00,0x00,0x00}, // 123 '{'
     {0x00,0x00,0x18,0x18,0x18,0x18,0x00,0x18,0x18,0x18,0x18,0x18,0x00,0x00,0x00,0x00}, // 124 '|'
     {0x00,0x00,0x70,0x18,0x18,0x18,0x0E,0x18,0x18,0x18,0x18,0x70,0x00,0x00,0x00,0x00}, // 125 '}'
     {0x00,0x00,0x76,0xDC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, // 126 '~'
     {0x00,0x00,0x00,0x00,0x10,0x38,0x6C,0xC6,0xC6,0xC6,0xFE,0x00,0x00,0x00,0x00,0x00}, // 127 (DEL)
 };
 
 #define CHAR_WIDTH  8
 #define CHAR_HEIGHT 16
 #define FIRST_CHAR  32  // Space
 #define LAST_CHAR   127 // DEL
 
 /* Font scaling - default 2x for readability */
 static uint8_t font_scale = 2;
 
 /**
  * @brief Set font scale
  */
 void FastText_SetScale(uint8_t scale) {
     if (scale >= 1 && scale <= 3) {
         font_scale = scale;
     }
 }
 
 /**
  * @brief Get character dimensions
  */
 void FastText_GetCharSize(coord_t *width, coord_t *height) {
     if (width) *width = CHAR_WIDTH * font_scale;
     if (height) *height = CHAR_HEIGHT * font_scale;
 }
 
 /**
  * @brief Stream a single character at position with scaling
  */
 static void stream_char(coord_t x, coord_t y, char c, color_t text_color, color_t bg_color) {
     /* Get character index */
     uint8_t idx = (uint8_t)c;
     
     /* Handle out of range characters */
     if (idx < FIRST_CHAR || idx > LAST_CHAR) {
         idx = FIRST_CHAR;  // Default to space
     }
     idx -= FIRST_CHAR;
     
     const uint8_t *glyph = font_8x16[idx];
     
     coord_t scaled_width = CHAR_WIDTH * font_scale;
     coord_t scaled_height = CHAR_HEIGHT * font_scale;
     
     /* Start streaming this character */
     gdispStreamStart(x, y, scaled_width, scaled_height);
     
     /* Stream each pixel with scaling - background and text together */
     for (coord_t row = 0; row < scaled_height; row++) {
         uint8_t glyph_row = glyph[row / font_scale];
         
         for (coord_t col = 0; col < scaled_width; col++) {
             uint8_t bit_pos = 7 - (col / font_scale);  // MSB first
             bool is_pixel_set = (glyph_row >> bit_pos) & 0x01;
             
             color_t color = is_pixel_set ? text_color : bg_color;
             gdispStreamColor(color);
         }
     }
     
     gdispStreamStop();
 }
 
 /**
  * @brief Draw text string left-aligned
  */
 void FastText_DrawString(coord_t x, coord_t y, const char *text,
                         color_t text_color, color_t bg_color) {
     if (!text) return;
     
     coord_t char_width = CHAR_WIDTH * font_scale;
     coord_t char_x = x;
     const char *p = text;
     
     while (*p) {
         stream_char(char_x, y, *p, text_color, bg_color);
         char_x += char_width;
         p++;
     }
 }
 
 /**
  * @brief Draw text string right-aligned
  */
 void FastText_DrawStringRight(coord_t x, coord_t y, const char *text,
                              color_t text_color, color_t bg_color) {
     if (!text) return;
     
     /* Calculate string length */
     uint8_t len = 0;
     const char *p = text;
     while (*p++) len++;
     
     /* Calculate starting x position */
     coord_t char_width = CHAR_WIDTH * font_scale;
     coord_t start_x = x - (len * char_width);
     
     /* Draw string */
     FastText_DrawString(start_x, y, text, text_color, bg_color);
 }
 
 /**
  * @brief Draw float value right-aligned
  */
 void FastText_DrawFloat(coord_t x, coord_t y, float value, uint8_t decimals,
                        uint8_t field_width, color_t text_color, color_t bg_color) {
     char buffer[16];
     
     /* Format number with right alignment */
     if (decimals == 0) {
         snprintf(buffer, sizeof(buffer), "%*.0f", field_width, value);
     } else if (decimals == 1) {
         snprintf(buffer, sizeof(buffer), "%*.1f", field_width, value);
     } else if (decimals == 2) {
         snprintf(buffer, sizeof(buffer), "%*.2f", field_width, value);
     } else {
         snprintf(buffer, sizeof(buffer), "%*.3f", field_width, value);
     }
     
     buffer[field_width] = '\0';
     
     /* Draw right-aligned */
     FastText_DrawStringRight(x, y, buffer, text_color, bg_color);
 }
 
 /**
  * @brief Draw integer right-aligned
  */
 void FastText_DrawInt(coord_t x, coord_t y, int32_t value, uint8_t field_width,
                      color_t text_color, color_t bg_color) {
     char buffer[16];
     
     snprintf(buffer, sizeof(buffer), "%*d", field_width, (int)value);
     buffer[field_width] = '\0';
     
     /* Draw right-aligned */
     FastText_DrawStringRight(x, y, buffer, text_color, bg_color);
 }